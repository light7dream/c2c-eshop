(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f05663e"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"2fbb":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{attrs:{inline:"","label-width":"110px","label-position":"left"}},[r("el-form-item",{attrs:{label:"商品名称"}},[r("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.search.goodName,callback:function(t){e.$set(e.search,"goodName",t)},expression:"search.goodName"}})],1),r("el-form-item",{attrs:{label:"总经销"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.search.topUid,callback:function(t){e.$set(e.search,"topUid",t)},expression:"search.topUid"}},[r("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.topUidoptions,(function(e){return r("el-option",{key:e.uid,attrs:{label:e.nickname,value:e.uid}})}))],2)],1),r("el-form-item",{attrs:{label:"卖方手机号"}},[r("el-input",{attrs:{placeholder:"卖方手机号"},model:{value:e.search.salerPhone,callback:function(t){e.$set(e.search,"salerPhone",t)},expression:"search.salerPhone"}})],1),r("el-form-item",{attrs:{label:"买方手机号"}},[r("el-input",{attrs:{placeholder:"买方手机号"},model:{value:e.search.buyerPhone,callback:function(t){e.$set(e.search,"buyerPhone",t)},expression:"search.buyerPhone"}})],1),r("el-form-item",{attrs:{label:"订单状态"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.search.payState,callback:function(t){e.$set(e.search,"payState",t)},expression:"search.payState"}},[r("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.payStateoptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],2)],1),r("el-form-item",{attrs:{label:"下单时间"}},[r("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.search.createdDate,callback:function(t){e.$set(e.search,"createdDate",t)},expression:"search.createdDate"}})],1),r("el-button",{attrs:{type:"success"},on:{click:e.getUserOrderList}},[e._v("搜索")]),r("el-button",{attrs:{type:"warning"},on:{click:e.exportUserOrderList}},[e._v("导出")])],1),r("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.userList,border:""}},[r("el-table-column",{attrs:{align:"center",label:"订单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.order_no)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.create_time)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"商品价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.g_price/100)+"元 ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"所属总销"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.总销.nickname)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"商品信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"top",width:"420",trigger:"hover"}},[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[r("el-form-item",{attrs:{label:"商品名称"}},[r("span",[e._v(e._s(t.row.商品name))])]),r("el-form-item",{attrs:{label:"商品价格"}},[r("span",[e._v(e._s(t.row.g_price/100)+"元")])])],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(t.row.商品name))])],1)]}}])}),r("el-table-column",{attrs:{align:"center",label:"买方信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"top",width:"320",trigger:"hover"}},[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("span",[e._v(e._s(t.row.买方nickname))])]),r("el-form-item",{attrs:{label:"开户行"}},[r("span",[e._v(e._s(t.row.买方bankname))])]),r("el-form-item",{attrs:{label:"卡号"}},[r("span",[e._v(e._s(t.row.买方bankno))])]),r("el-form-item",{attrs:{label:"收款人"}},[r("span",[e._v(e._s(t.row.买方payeename))])]),r("el-form-item",{attrs:{label:"电话"}},[r("span",[e._v(e._s(t.row.买方phone))])])],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(null==t.row.买方nickname?"卖方信息未找到":t.row.买方nickname))])],1)]}}])}),r("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,label:"卖方信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"top",width:"320",trigger:"hover"}},[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("span",[e._v(e._s(t.row.卖方nickname))])]),r("el-form-item",{attrs:{label:"开户行"}},[r("span",[e._v(e._s(t.row.卖方bankname))])]),r("el-form-item",{attrs:{label:"卡号"}},[r("span",[e._v(e._s(t.row.卖方bankno))])]),r("el-form-item",{attrs:{label:"收款人"}},[r("span",[e._v(e._s(t.row.卖方payeename))])]),r("el-form-item",{attrs:{label:"电话"}},[r("span",[e._v(e._s(t.row.卖方phone))])])],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(null==t.row.卖方nickname?"卖方信息未找到":t.row.卖方nickname))])],1)]}}])}),r("el-table-column",{attrs:{align:"center",label:"支付凭证"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.viewOrderPayImg(t.row.uid,t.row.order_id)}}},[e._v("查看")])]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.pay_state?r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){return e.onCancleOrder(t.row)}}},[e._v("取消订单")]):e._e()]}}])})],1),r("el-dialog",{attrs:{title:e.viewOrderPayImgTitle,visible:e.viewOrderPayImgDialogVisible},on:{"update:visible":function(t){e.viewOrderPayImgDialogVisible=t}}},[r("el-carousel",{attrs:{width:"100%",interval:4e3}},e._l(e.orderPayImgList,(function(e,t){return r("el-carousel-item",{key:t},[r("img",{attrs:{src:e.img,width:"100%"}})])})),1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.viewOrderPayImgDialogVisible=!1}}},[e._v("关闭")])],1)],1),r("el-pagination",{staticClass:"pagination",attrs:{layout:"total, sizes, prev, pager, next, jumper",background:"","page-size":e.page.page_size,"pager-count":11,total:e.page.total_count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],s=r("5530"),o=r("1da1"),l=(r("ac1f"),r("841c"),r("99af"),r("96cf"),r("2ef0"),r("c24f")),i={filters:{stateFilter:function(e){return 0==e?"danger":1==e?"success":"warning"}},data:function(){return{submitBtnLock:!1,userList:[],orderPayImgList:[],viewOrderPayImgDialogVisible:!1,viewOrderPayImgTitle:"",page:{page_index:0,page_size:10,total_count:0},topUidoptions:[],payStateoptions:[{value:0,label:"待支付"},{value:-1,label:"取消订单"},{value:1,label:"完成"},{value:2,label:"已上架"}],search:{salerPhone:"",buyerPhone:"",payState:"",createdDate:"",goodName:"",topUid:""}}},computed:{},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["q"])({});case 2:r=t.sent,e.topUidoptions=r.data,e.getUserOrderList();case 5:case"end":return t.stop()}}),t)})))()},methods:{viewOrderPayImg:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={uid:e,order_id:t},a.next=3,Object(l["M"])(n);case 3:s=a.sent,r.orderPayImgList=s.data,r.viewOrderPayImgDialogVisible=!0,r.viewOrderPayImgTitle="查看支付凭证";case 7:case"end":return a.stop()}}),a)})))()},onCancleOrder:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=confirm("取消订单后该用户已成功抢购的记录不会清除，确认取消订单？"),!a){r.next=12;break}return n={gid:e.gid,order_id:e.order_id,uid:e.uid},r.next=5,Object(l["b"])(n);case 5:if(s=r.sent,s.msg,o=s.res_code,!(o>-1)){r.next=12;break}return r.next=11,t.getUserOrderList();case 11:t.$message({type:"success",message:"取消成功!"});case 12:case"end":return r.stop()}}),r)})))()},getUserOrderList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(s["a"])(Object(s["a"])({},e.page),{},{topUid:e.search.topUid,goodName:e.search.goodName,payState:e.search.payState,salerPhone:e.search.salerPhone,buyerPhone:e.search.buyerPhone,createdAtStart:e.search.createdDate?e.search.createdDate[0]:"",createdAtEnd:e.search.createdDate?e.search.createdDate[1]:""}),t.next=3,Object(l["o"])(r);case 3:a=t.sent,e.userList=a.data.list,e.page.page_index=a.data.page_index,e.page.page_size=a.data.page_size,e.page.total_count=a.data.total_count;case 8:case"end":return t.stop()}}),t)})))()},exportUserOrderList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(s["a"])(Object(s["a"])({},e.page),{},{topUid:e.search.topUid,goodName:e.search.goodName,payState:e.search.payState,salerPhone:e.search.salerPhone,buyerPhone:e.search.buyerPhone,createdAtStart:e.search.createdDate?e.search.createdDate[0]:"",createdAtEnd:e.search.createdDate?e.search.createdDate[1]:""}),t.next=3,Object(l["e"])(r);case 3:a=t.sent,window.open(window.location.origin+window.location.pathname+a.data.substr(1,a.data.length),"_blank");case 5:case"end":return t.stop()}}),t)})))()},moreSetting:function(e){var t=this,r=this,a=e.key,n=e.scope,s=(n.$index,n.row);this.$confirm("确定将订单 ".concat(s.order_no,"设置为").concat(1==a?"上架":2==a?"抢购":"已支付","状态吗?"),{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,setRushOrderInfo({state:a,order_id:s.order_id});case 2:if(n=e.sent,o=n.res_code,!(o>0)){e.next=8;break}return t.$message({type:"success",message:"设置成功!"}),e.next=8,r.getUserOrderList();case 8:case"end":return e.stop()}}),e)})))).catch((function(e){t.$message({type:"success",message:"设置失败!"})}))},_getDefaultImg:function(e){return e||r("4231")},_getFirstImg:function(e){return e?(e=JSON.parse(e),e[0]?e[0]:r("4231")):r("4231")},_getStateStr:function(e){return 0==e?"停用":1==e?"正常":"未知"},handleSizeChange:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.page.page_size=e,r.next=3,t.getUserOrderList();case 3:case"end":return r.stop()}}),r)})))()},handleCurrentChange:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.page.page_index=e-1,r.next=3,t.getUserOrderList();case 3:case"end":return r.stop()}}),r)})))()}}},c=i,u=(r("387e"),r("2877")),d=Object(u["a"])(c,a,n,!1,null,"df10b95a",null);t["default"]=d.exports},"387e":function(e,t,r){"use strict";r("ded5")},4231:function(e,t,r){e.exports=r.p+"static/img/nothing.6a67b59e.png"},"841c":function(e,t,r){"use strict";var a=r("d784"),n=r("825a"),s=r("1d80"),o=r("129f"),l=r("14c3");a("search",1,(function(e,t,r){return[function(t){var r=s(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](String(r))},function(e){var a=r(t,e,this);if(a.done)return a.value;var s=n(e),i=String(this),c=s.lastIndex;o(c,0)||(s.lastIndex=0);var u=l(s,i);return o(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]}))},ded5:function(e,t,r){}}]);