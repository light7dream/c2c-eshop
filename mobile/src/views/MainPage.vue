<template>
  <div class="page">
    <div class="content">
      <mt-tab-container v-model="selected">
        <mt-tab-container-item id="home">
          <TabHome ref="home" />
        </mt-tab-container-item>
        <mt-tab-container-item id="onsale">
          <TabOnsale ref="onsale" v-on:onPage="onPage" />
        </mt-tab-container-item>
        <mt-tab-container-item id="cart">
          <TabCart ref="cart" />
        </mt-tab-container-item>
        <mt-tab-container-item id="my">
          <TabMy ref="my" />
        </mt-tab-container-item>
      </mt-tab-container>
    </div>

    <mt-tabbar fixed v-model="selected">
      <mt-tab-item id="home">
        <div class="home-btn">
          <template v-if="selected == 'home'">
            <svg
              width="24"
              height="23"
              viewBox="0 0 24 23"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M2.512 11.8365C2.5 12.2233 2.5 12.6687 2.5 13.1847V21.0006C2.5 21.9434 2.5 22.4148 2.79289 22.7077C3.08579 23.0006 3.55719 23.0006 4.5 23.0006H8.17723V11.8358C8.12802 11.836 8.07907 11.836 8.03059 11.8359L7.96878 11.8359L7.90698 11.8359C7.66877 11.8362 7.41917 11.8364 7.18417 11.805C6.50335 11.7139 5.88048 11.4279 5.3783 11C5.08143 11.2529 4.74231 11.4563 4.3736 11.5992C3.7955 11.8233 3.14167 11.8372 2.512 11.8365Z"
                fill="#CF130A"
              />
              <path
                d="M2.45194 1.51032C2.63514 0.784859 2.72674 0.422128 2.99772 0.211064C3.26871 0 3.64283 0 4.39107 0H17.6089C18.3572 0 18.7313 0 19.0023 0.211064C19.2733 0.422128 19.3649 0.784859 19.5481 1.51032L21.007 7.28755C21.1692 7.93012 21.2504 8.2514 21.18 8.50615C21.1095 8.76155 20.9405 8.97852 20.7101 9.10943C20.4804 9.24 20.149 9.24 19.4863 9.24H19.4338C18.5732 9.24 18.1429 9.24 17.788 9.09933C17.3819 8.93841 17.0397 8.64898 16.8136 8.27526C16.6159 7.94856 16.5445 7.52423 16.4016 6.67557V6.67557C16.3619 6.43964 16.342 6.32168 16.3105 6.29771C16.2747 6.27057 16.2253 6.27057 16.1895 6.29771C16.158 6.32168 16.1381 6.43964 16.0984 6.67557L16.0056 7.22666C15.9507 7.55263 15.9233 7.71562 15.8786 7.85419C15.6446 8.57935 15.0189 9.10854 14.2649 9.21891C14.1208 9.24 13.9556 9.24 13.625 9.24V9.24C13.2944 9.24 13.1292 9.24 12.9851 9.21891C12.2311 9.10854 11.6054 8.57935 11.3714 7.85419C11.3267 7.71562 11.2993 7.55263 11.2444 7.22666L11.1516 6.67557C11.1119 6.43964 11.092 6.32168 11.0605 6.29772C11.0247 6.27057 10.9753 6.27057 10.9395 6.29772C10.908 6.32168 10.8881 6.43964 10.8484 6.67557L10.7556 7.22666C10.7007 7.55263 10.6733 7.71562 10.6286 7.85419C10.3946 8.57935 9.76885 9.10854 9.01491 9.21891C8.87083 9.24 8.70556 9.24 8.375 9.24V9.24C8.04444 9.24 7.87917 9.24 7.73509 9.21891C6.98115 9.10854 6.35542 8.57935 6.12142 7.85419C6.0767 7.71562 6.04927 7.55263 5.99439 7.22666L5.90161 6.67557C5.86189 6.43964 5.84203 6.32168 5.81047 6.29772C5.77473 6.27057 5.72527 6.27057 5.68953 6.29772C5.65797 6.32168 5.63811 6.43964 5.59839 6.67557V6.67557C5.45552 7.52423 5.38408 7.94856 5.18643 8.27526C4.96033 8.64898 4.61811 8.93841 4.21203 9.09933C3.85706 9.24 3.42676 9.24 2.56615 9.24H2.51374C1.851 9.24 1.51963 9.24 1.28986 9.10943C1.0595 8.97852 0.890504 8.76155 0.819986 8.50615C0.749646 8.2514 0.830779 7.93012 0.993044 7.28755L2.45194 1.51032Z"
                fill="#CF130A"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M15.8197 11.8358V23.0005H19.4969C20.4397 23.0005 20.9111 23.0005 21.204 22.7076C21.4969 22.4147 21.4969 21.9433 21.4969 21.0005V13.1846C21.4969 12.6687 21.4969 12.2233 21.4849 11.8365C20.8553 11.8372 20.2014 11.8233 19.6233 11.5992C19.2546 11.4563 18.9155 11.253 18.6186 11C18.1164 11.4279 17.4936 11.7139 16.8128 11.805C16.5778 11.8364 16.3282 11.8362 16.09 11.8359L16.0282 11.8359L15.9664 11.8359C15.9179 11.836 15.8689 11.836 15.8197 11.8358Z"
                fill="#0747A9"
              />
              <path
                d="M4.45194 2.51032C4.63514 1.78486 4.72674 1.42213 4.99772 1.21106C5.26871 1 5.64283 1 6.39107 1H19.6089C20.3572 1 20.7313 1 21.0023 1.21106C21.2733 1.42213 21.3649 1.78486 21.5481 2.51032L23.007 8.28755C23.1692 8.93012 23.2504 9.2514 23.18 9.50615C23.1095 9.76155 22.9405 9.97852 22.7101 10.1094C22.4804 10.24 22.149 10.24 21.4863 10.24H21.4338C20.5732 10.24 20.1429 10.24 19.788 10.0993C19.3819 9.93841 19.0397 9.64898 18.8136 9.27526C18.6159 8.94856 18.5445 8.52423 18.4016 7.67557V7.67557C18.3619 7.43964 18.342 7.32168 18.3105 7.29772C18.2747 7.27057 18.2253 7.27057 18.1895 7.29772C18.158 7.32168 18.1381 7.43964 18.0984 7.67557L18.0056 8.22666C17.9507 8.55263 17.9233 8.71562 17.8786 8.85419C17.6446 9.57935 17.0189 10.1085 16.2649 10.2189C16.1208 10.24 15.9556 10.24 15.625 10.24V10.24C15.2944 10.24 15.1292 10.24 14.9851 10.2189C14.2311 10.1085 13.6054 9.57935 13.3714 8.85419C13.3267 8.71562 13.2993 8.55263 13.2444 8.22666L13.1516 7.67557C13.1119 7.43964 13.092 7.32168 13.0605 7.29772C13.0247 7.27057 12.9753 7.27057 12.9395 7.29772C12.908 7.32168 12.8881 7.43964 12.8484 7.67557L12.7556 8.22666C12.7007 8.55263 12.6733 8.71562 12.6286 8.85419C12.3946 9.57935 11.7689 10.1085 11.0149 10.2189C10.8708 10.24 10.7056 10.24 10.375 10.24V10.24C10.0444 10.24 9.87917 10.24 9.73509 10.2189C8.98115 10.1085 8.35542 9.57935 8.12142 8.85419C8.0767 8.71562 8.04926 8.55263 7.99439 8.22666L7.90161 7.67557C7.86189 7.43964 7.84203 7.32168 7.81047 7.29772C7.77473 7.27057 7.72527 7.27057 7.68953 7.29772C7.65797 7.32168 7.63811 7.43964 7.59839 7.67557V7.67557C7.45552 8.52423 7.38408 8.94856 7.18643 9.27526C6.96033 9.64898 6.61811 9.93841 6.21203 10.0993C5.85706 10.24 5.42676 10.24 4.56615 10.24H4.51374C3.851 10.24 3.51963 10.24 3.28986 10.1094C3.0595 9.97852 2.8905 9.76155 2.81999 9.50615C2.74965 9.2514 2.83078 8.93012 2.99304 8.28755L4.45194 2.51032Z"
                fill="#0747A9"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M4.01187 10.9059C4 11.2917 4 11.7357 4 12.2498V20.1169C4 21.0597 4 21.5311 4.29289 21.824C4.58579 22.1169 5.05719 22.1169 6 22.1169H9.71428V17.339C9.71428 16.7867 10.162 16.339 10.7143 16.339H13.2857C13.838 16.339 14.2857 16.7867 14.2857 17.339V22.1169H18C18.9428 22.1169 19.4142 22.1169 19.7071 21.824C20 21.5311 20 21.0597 20 20.1169V12.2498C20 11.7351 20 11.2906 19.9881 10.9045C19.4473 10.8969 18.8983 10.856 18.401 10.6587C18.04 10.5155 17.7079 10.3143 17.4167 10.0652C16.9241 10.4864 16.3149 10.771 15.6485 10.8685C15.3921 10.906 15.1193 10.9057 14.8592 10.9054L14.7917 10.9053L14.7242 10.9054C14.464 10.9057 14.1912 10.906 13.9348 10.8685C13.2684 10.771 12.6592 10.4864 12.1667 10.0652C11.6741 10.4864 11.0649 10.771 10.3985 10.8685C10.1421 10.906 9.86935 10.9057 9.60915 10.9054L9.54166 10.9053L9.47416 10.9054C9.21396 10.9057 8.94124 10.906 8.68485 10.8685C8.0184 10.771 7.4092 10.4864 6.91666 10.0652C6.62538 10.3143 6.29327 10.5155 5.9323 10.6587C5.33237 10.8967 4.65712 10.9071 4.01187 10.9059Z"
                fill="#141519"
              />
              <path
                d="M3.45208 2.2525C3.63521 1.52693 3.72677 1.16415 3.99777 0.953045C4.26878 0.741943 4.64294 0.741943 5.39126 0.741943H18.6087C19.3571 0.741943 19.7312 0.741943 20.0022 0.953045C20.2732 1.16415 20.3648 1.52693 20.5479 2.2525L22.0073 8.03443C22.1694 8.67695 22.2505 8.99822 22.1801 9.25295C22.1096 9.50832 21.9406 9.72526 21.7103 9.85615C21.4805 9.9867 21.1492 9.9867 20.4865 9.9867H20.4349C19.5734 9.9867 19.1427 9.9867 18.7875 9.84578C18.3818 9.68487 18.04 9.39572 17.814 9.02242C17.6161 8.69547 17.5446 8.27072 17.4017 7.42124V7.42124C17.3619 7.18499 17.342 7.06687 17.3104 7.0429C17.2747 7.01581 17.2253 7.01581 17.1896 7.0429C17.158 7.06687 17.1381 7.18499 17.0983 7.42124L17.0054 7.97334C16.9506 8.29918 16.9232 8.4621 16.8785 8.60062C16.6446 9.32595 16.0187 9.85529 15.2646 9.96563C15.1206 9.9867 14.9554 9.9867 14.625 9.9867V9.9867C14.2946 9.9867 14.1294 9.9867 13.9854 9.96563C13.2313 9.85529 12.6054 9.32595 12.3715 8.60062C12.3268 8.4621 12.2994 8.29918 12.2446 7.97334L12.1517 7.42124C12.1119 7.18499 12.092 7.06687 12.0604 7.0429C12.0247 7.01581 11.9753 7.01581 11.9396 7.0429C11.908 7.06687 11.8881 7.18499 11.8483 7.42124L11.7554 7.97334C11.7006 8.29918 11.6732 8.4621 11.6285 8.60062C11.3946 9.32595 10.7687 9.85529 10.0146 9.96563C9.87063 9.9867 9.70542 9.9867 9.375 9.9867V9.9867C9.04458 9.9867 8.87937 9.9867 8.73536 9.96563C7.98126 9.85529 7.35541 9.32595 7.12147 8.60062C7.0768 8.4621 7.04938 8.29918 6.99456 7.97334L6.90166 7.42124C6.86191 7.18499 6.84203 7.06687 6.81042 7.0429C6.7747 7.01581 6.7253 7.01581 6.68958 7.0429C6.65797 7.06687 6.63809 7.18499 6.59834 7.42124V7.42124C6.4554 8.27072 6.38393 8.69547 6.18601 9.02242C5.96003 9.39572 5.61816 9.68487 5.21254 9.84578C4.85728 9.9867 4.42656 9.9867 3.56514 9.9867H3.5135C2.85082 9.9867 2.51949 9.9867 2.28972 9.85615C2.05938 9.72526 1.89039 9.50832 1.81985 9.25295C1.74949 8.99822 1.83057 8.67695 1.99275 8.03443L3.45208 2.2525Z"
                fill="#141519"
              />
            </svg>
          </template>
          <template v-if="selected != 'home'">
            <svg
              width="24"
              height="23"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M15.4444 23.5V16.8333C15.4444 16.281 14.9967 15.8333 14.4444 15.8333H10.0555C9.50326 15.8333 9.05554 16.281 9.05554 16.8333V23.5"
                stroke="black"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M3.30556 10.7223V19.5C3.30556 21.3856 3.30556 22.3284 3.89134 22.9142C4.47713 23.5 5.41994 23.5 7.30555 23.5H17.1944C19.0801 23.5 20.0229 23.5 20.6087 22.9142C21.1944 22.3284 21.1944 21.3856 21.1944 19.5V10.7223"
                stroke="black"
              />
              <path
                d="M2.92682 2.01493C3.10871 1.28737 3.19966 0.923589 3.47092 0.711794C3.74218 0.5 4.11716 0.5 4.86711 0.5H19.6329C20.3828 0.5 20.7578 0.5 21.0291 0.711794C21.3003 0.923589 21.3913 1.28737 21.5732 2.01493L23.2163 8.58752C23.4197 9.40088 23.5213 9.80756 23.3876 10.118C23.3197 10.2756 23.2123 10.413 23.0759 10.5172C22.8072 10.7222 22.3821 10.7222 21.5319 10.7222V10.7222C20.401 10.7222 19.8356 10.7222 19.396 10.489C19.1416 10.3541 18.9193 10.1658 18.7444 9.93707C18.4422 9.54181 18.3505 8.99167 18.1671 7.89138V7.89138C18.1156 7.58272 18.0899 7.42839 18.0417 7.40627C18.0152 7.39411 17.9848 7.39411 17.9583 7.40627C17.9101 7.42839 17.8844 7.58272 17.8329 7.89138L17.7287 8.51652C17.6446 9.02128 17.6025 9.27366 17.5167 9.48244C17.2697 10.0835 16.7461 10.5271 16.1126 10.6719C15.8926 10.7222 15.6367 10.7222 15.125 10.7222V10.7222C14.6133 10.7222 14.3574 10.7222 14.1374 10.6719C13.5039 10.5271 12.9803 10.0835 12.7333 9.48244C12.6475 9.27366 12.6054 9.02128 12.5213 8.51652L12.4171 7.89138C12.3656 7.58272 12.3399 7.42839 12.2917 7.40627C12.2652 7.39411 12.2348 7.39411 12.2083 7.40627C12.1601 7.42839 12.1344 7.58272 12.0829 7.89138L11.9787 8.51652C11.8946 9.02128 11.8525 9.27366 11.7667 9.48244C11.5197 10.0835 10.9961 10.5271 10.3626 10.6719C10.1426 10.7222 9.88672 10.7222 9.375 10.7222V10.7222C8.86328 10.7222 8.60741 10.7222 8.38736 10.6719C7.75389 10.5271 7.23028 10.0835 6.98327 9.48244C6.89746 9.27366 6.8554 9.02128 6.77127 8.51652L6.66708 7.89138C6.61564 7.58272 6.58992 7.42839 6.54171 7.40627C6.51523 7.39411 6.48477 7.39411 6.45829 7.40627C6.41008 7.42839 6.38436 7.58272 6.33292 7.89138V7.89138C6.14953 8.99167 6.05784 9.54181 5.7556 9.93707C5.58067 10.1658 5.35841 10.3541 5.10401 10.489C4.66444 10.7222 4.099 10.7222 2.96811 10.7222V10.7222C2.1179 10.7222 1.69279 10.7222 1.42411 10.5172C1.28768 10.413 1.18034 10.2756 1.11242 10.118C0.97866 9.80756 1.08033 9.40088 1.28367 8.58752L2.92682 2.01493Z"
                stroke="black"
              />
            </svg>
          </template>
          <p class="tabText">首页</p>
        </div>
      </mt-tab-item>
      <mt-tab-item id="onsale">
        <div class="home-btn">
          <template v-if="selected == 'onsale'">
            <svg
              width="24"
              height="23"
              viewBox="0 0 22 23.5"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M0.503647 8.90344C0.503647 7.01782 0.503647 6.07502 1.08943 5.48923C1.67522 4.90344 2.61803 4.90344 4.50365 4.90344H13.7844C15.6701 4.90344 16.6129 4.90344 17.1986 5.48923C17.6328 5.92341 17.7452 6.55373 17.7743 7.61872H3.38377V21.3944C2.66839 21.2232 2.12028 20.9472 1.67522 20.5022C0.503647 19.3306 0.503647 17.445 0.503647 13.6738V8.90344Z"
                fill="#CF130A"
              />
              <path
                d="M5.14014 6.70007L5.14014 5.48768C5.14014 3.01361 7.14576 1.00798 9.61983 1.00798V1.00798C12.0939 1.00798 14.0995 3.01361 14.0995 5.48768L14.0995 6.70007"
                stroke="#CF130A"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M3.32555 22.4231C3.42746 22.5704 3.54194 22.7076 3.67054 22.8362C4.84211 24.0078 6.72773 24.0078 10.499 24.0078H12.5037C16.2749 24.0078 18.1605 24.0078 19.3321 22.8362C20.5037 21.6647 20.5037 19.779 20.5037 16.0078V11.3693C20.5037 9.48369 20.5037 8.54088 19.9179 7.95509C19.5678 7.60504 19.0903 7.46417 18.3602 7.40748V22.4231H3.32555Z"
                fill="#0747A9"
              />
              <rect
                x="16.0212"
                y="19.5709"
                width="2.57124"
                height="2.85231"
                fill="#0747A9"
              />
              <path
                d="M6.10008 7.1803L6.10008 5.9679C6.10008 3.49383 8.10571 1.48821 10.5798 1.48821V1.48821C13.0538 1.48821 15.0595 3.49384 15.0595 5.9679L15.0595 7.1803"
                stroke="#141519"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M2.04587 6.62766C1.46008 7.21344 1.46008 8.15625 1.46008 10.0419V15.1181C1.46008 18.8894 1.46008 20.775 2.63166 21.9466C3.80323 23.1181 5.68885 23.1181 9.46009 23.1181H10.7331C14.5043 23.1181 16.39 23.1181 17.5615 21.9466C18.7331 20.775 18.7331 18.8894 18.7331 15.1181V10.0419C18.7331 8.15625 18.7331 7.21344 18.1473 6.62766C17.5615 6.04187 16.6187 6.04187 14.7331 6.04187H5.46008C3.57447 6.04187 2.63166 6.04187 2.04587 6.62766ZM8.21775 11.7341C8.21775 11.1818 7.77004 10.7341 7.21775 10.7341C6.66547 10.7341 6.21775 11.1818 6.21775 11.7341V14.011C6.21775 14.5632 6.66547 15.011 7.21775 15.011C7.77004 15.011 8.21775 14.5632 8.21775 14.011V11.7341ZM13.9754 11.7341C13.9754 11.1818 13.5277 10.7341 12.9754 10.7341C12.4231 10.7341 11.9754 11.1818 11.9754 11.7341V14.011C11.9754 14.5632 12.4231 15.011 12.9754 15.011C13.5277 15.011 13.9754 14.5632 13.9754 14.011V11.7341Z"
                fill="#141519"
              />
            </svg>
          </template>
          <template v-if="selected != 'onsale'">
            <svg
              width="24"
              height="23"
              viewBox="0 0 22 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M5.66666 6.88889L5.66666 5.5C5.66666 2.73858 7.90524 0.499998 10.6667 0.499997V0.499997C13.4281 0.499997 15.6667 2.73858 15.6667 5.5L15.6667 6.88889"
                stroke="black"
                stroke-linecap="round"
              />
              <path
                d="M14.4167 14.5556V12"
                stroke="black"
                stroke-linecap="round"
              />
              <path
                d="M6.91666 14.5556V12"
                stroke="black"
                stroke-linecap="round"
              />
              <path
                d="M0.666672 10.8889C0.666672 9.00327 0.666672 8.06046 1.25246 7.47467C1.83824 6.88889 2.78105 6.88889 4.66667 6.88889H16.6667C18.5523 6.88889 19.4951 6.88889 20.0809 7.47467C20.6667 8.06046 20.6667 9.00327 20.6667 10.8889V15.5C20.6667 19.2712 20.6667 21.1569 19.4951 22.3284C18.3235 23.5 16.4379 23.5 12.6667 23.5H8.66667C4.89544 23.5 3.00982 23.5 1.83824 22.3284C0.666672 21.1569 0.666672 19.2712 0.666672 15.5V10.8889Z"
                stroke="black"
              />
            </svg>
          </template>
          <p class="tabText">抢购</p>
        </div>
      </mt-tab-item>
      <mt-tab-item id="cart">
        <div class="home-btn">
          <template v-if="selected == 'cart'">
            <svg
              width="24"
              height="23"
              viewBox="0 0 24 22"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M23.3333 8H0.333328V10.7239C1.5497 10.8488 2.15788 10.9112 2.60352 11.2478C2.71856 11.3347 2.82386 11.4338 2.9176 11.5433C3.28072 11.9676 3.3801 12.5709 3.57884 13.7774L4.38152 18.6501C4.64502 20.2498 4.77678 21.0496 5.33664 21.5248C5.8965 22 6.70711 22 8.32833 22H15.3403C16.9607 22 17.7708 22 18.3306 21.5252C18.8903 21.0504 19.0225 20.2511 19.2868 18.6524L20.0938 13.7707C20.2925 12.5692 20.3918 11.9685 20.7528 11.5454C20.8478 11.434 20.9548 11.3333 21.0718 11.2453C21.5163 10.9109 22.122 10.8486 23.3333 10.7239V8ZM16.845 13.9955C16.9345 13.4505 16.5653 12.9361 16.0203 12.8466C15.4753 12.7571 14.961 13.1263 14.8714 13.6713L14.2964 17.1713C14.2069 17.7162 14.5761 18.2306 15.1211 18.3201C15.6661 18.4097 16.1805 18.0405 16.27 17.4955L16.845 13.9955ZM8.7951 13.6713C8.70557 13.1263 8.19119 12.7571 7.64621 12.8466C7.10123 12.9361 6.73202 13.4505 6.82155 13.9955L7.39655 17.4955C7.48609 18.0405 8.00046 18.4097 8.54544 18.3201C9.09042 18.2306 9.45963 17.7162 9.3701 17.1713L8.7951 13.6713Z"
                fill="#CF130A"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M23.3333 7.01514H0.333328V10.417C0.998797 10.417 1.33153 10.417 1.61627 10.5037C2.10571 10.6527 2.51945 10.9836 2.77238 11.4283C2.91953 11.687 2.99268 12.0116 3.13898 12.6608L4.23006 17.5022C4.56728 18.9985 4.73589 19.7467 5.28364 20.1847C5.83139 20.6228 6.59833 20.6228 8.1322 20.6228H15.5345C17.0683 20.6228 17.8353 20.6228 18.383 20.1847C18.9308 19.7467 19.0994 18.9985 19.4366 17.5022L20.5277 12.6608L20.5277 12.6608C20.674 12.0116 20.7471 11.687 20.8943 11.4283C21.1472 10.9836 21.5609 10.6527 22.0504 10.5037C22.3351 10.417 22.6679 10.417 23.3333 10.417V7.01514ZM8.79434 12.5184C8.7023 11.9738 8.18623 11.607 7.64167 11.699C7.09711 11.7911 6.73027 12.3071 6.82231 12.8517L7.39731 16.2536C7.48936 16.7982 8.00542 17.165 8.54998 17.073C9.09455 16.9809 9.46138 16.4649 9.36934 15.9203L8.79434 12.5184ZM16.8442 12.8517C16.9363 12.3071 16.5694 11.7911 16.0249 11.699C15.4803 11.607 14.9642 11.9738 14.8722 12.5184L14.2972 15.9203C14.2052 16.4649 14.572 16.9809 15.1166 17.073C15.6611 17.165 16.1772 16.7982 16.2692 16.2536L16.8442 12.8517Z"
                fill="#0747A9"
              />
              <path
                d="M11.9902 5.82104L11.9902 3.48771"
                stroke="#CF130A"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                d="M11.9902 4.32983L11.9902 1.9965"
                stroke="#0747A9"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                d="M11.9902 4.79204L11.9902 3.20777"
                stroke="#141519"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M23.3333 7.58203H0.333328V10.9154C1.00593 10.9154 1.34224 10.9154 1.63001 11.004C2.11152 11.1524 2.51929 11.477 2.77181 11.913C2.92272 12.1736 2.9981 12.5014 3.14887 13.1569L4.21955 17.812C4.56191 19.3005 4.73309 20.0448 5.27987 20.4801C5.82665 20.9154 6.59036 20.9154 8.11777 20.9154H15.5489C17.0763 20.9154 17.84 20.9154 18.3868 20.4801C18.9336 20.0448 19.1047 19.3005 19.4471 17.812L20.5178 13.1569L20.5178 13.1568C20.6686 12.5014 20.7439 12.1736 20.8948 11.913C21.1474 11.477 21.5551 11.1524 22.0366 11.004C22.3244 10.9154 22.6607 10.9154 23.3333 10.9154V7.58203ZM8.79377 12.9677C8.69989 12.4234 8.18258 12.0583 7.63834 12.1522C7.09409 12.2461 6.729 12.7634 6.82288 13.3076L7.39788 16.641C7.49176 17.1852 8.00907 17.5503 8.55332 17.4564C9.09756 17.3626 9.46266 16.8452 9.36877 16.301L8.79377 12.9677ZM16.8437 13.3076C16.9375 12.7634 16.5724 12.2461 16.0282 12.1522C15.484 12.0583 14.9666 12.4234 14.8728 12.9677L14.2978 16.301C14.2039 16.8452 14.569 17.3626 15.1132 17.4564C15.6575 17.5503 16.1748 17.1852 16.2687 16.641L16.8437 13.3076Z"
                fill="#141519"
              />
            </svg>
          </template>
          <template v-if="selected != 'cart'">
            <svg
              width="24"
              height="23"
              viewBox="0 1 24 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11 2.83502L11 0.500085"
                stroke="black"
                stroke-linecap="round"
              />
              <path
                d="M9.2386 15.7745L8.66301 12.2311"
                stroke="black"
                stroke-linecap="round"
              />
              <path
                d="M13.8385 15.7745L14.4141 12.2311"
                stroke="black"
                stroke-linecap="round"
              />
              <path
                d="M0.0386047 7.50485H23.0386H22.9428C21.3397 7.50485 20.5381 7.50485 19.9806 7.97235C19.4231 8.43985 19.2834 9.22915 19.004 10.8077L17.8732 17.1972C17.5938 18.7758 17.4541 19.5651 16.8966 20.0326C16.3391 20.5001 15.5375 20.5001 13.9344 20.5001H9.14282C7.5397 20.5001 6.73813 20.5001 6.18063 20.0326C5.62312 19.5651 5.48343 18.7758 5.20403 17.1972L4.07317 10.8077C3.79378 9.22914 3.65409 8.43985 3.09658 7.97235C2.53907 7.50485 1.73751 7.50485 0.13439 7.50485H0.0386047Z"
                stroke="black"
                stroke-linecap="round"
              />
            </svg>
          </template>
          <p class="tabText">购物车</p>
        </div>
      </mt-tab-item>
      <mt-tab-item id="my">
        <div class="home-btn">
          <template v-if="selected == 'my'">
            <svg
              width="23"
              height="23"
              viewBox="0 0 23 23"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M0.999939 11.6258C0.999939 5.84792 5.68932 1.16406 11.4672 1.16406C17.245 1.16406 21.9344 5.84792 21.9344 11.6258C21.9344 14.7964 20.5222 17.6377 18.2929 19.5562C17.8177 18.2761 16.9899 17.1507 15.8989 16.314C14.6275 15.3389 13.0697 14.8104 11.4672 14.8104C9.86464 14.8104 8.30685 15.3389 7.03538 16.314C5.94443 17.1507 5.11657 18.2761 4.64143 19.5562C2.41213 17.6377 0.999939 14.7964 0.999939 11.6258ZM16.5711 20.7345C16.5733 20.7421 16.5755 20.7496 16.5778 20.7571C15.066 21.6044 13.3227 22.0874 11.4672 22.0874C9.6116 22.0874 7.86831 21.6044 6.35655 20.7571C6.36013 20.7454 6.36353 20.7336 6.36672 20.7217C6.66751 19.5998 7.33033 18.6083 8.2525 17.901C9.17467 17.1938 10.3046 16.8104 11.4672 16.8104C12.6297 16.8104 13.7596 17.1938 14.6818 17.901C15.604 18.6083 16.2668 19.5998 16.5676 20.7217C16.5687 20.726 16.5699 20.7303 16.5711 20.7345ZM9.32698 8.48734C9.32698 7.30677 10.2847 6.34883 11.4671 6.34883C12.6496 6.34883 13.6073 7.30677 13.6073 8.48734C13.6073 9.6679 12.6496 10.6258 11.4671 10.6258C10.2847 10.6258 9.32698 9.6679 9.32698 8.48734ZM11.4671 4.34883C9.18109 4.34883 7.32698 6.2012 7.32698 8.48734C7.32698 10.7735 9.18109 12.6258 11.4671 12.6258C13.7532 12.6258 15.6073 10.7735 15.6073 8.48734C15.6073 6.2012 13.7532 4.34883 11.4671 4.34883Z"
                fill="#141519"
              />
              <rect
                x="1.49994"
                y="1.66406"
                width="19.9344"
                height="19.9234"
                rx="9.96169"
                stroke="#141519"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M10.9417 0.469116C5.16384 0.469116 0.474457 5.15297 0.474457 10.9308C0.474457 13.453 1.36805 15.7667 2.85569 17.5733C1.68564 15.8846 0.999939 13.8352 0.999939 11.6258C0.999939 5.84794 5.68932 1.16408 11.4672 1.16408C14.7228 1.16408 17.6329 2.65121 19.5531 4.98323C17.6634 2.25572 14.5101 0.469116 10.9417 0.469116Z"
                fill="#0747A9"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M5.70522 20.3602C7.45872 21.684 9.64177 22.4691 12.0073 22.4691C17.7851 22.4691 22.4745 17.7852 22.4745 12.0074C22.4745 8.3579 20.6036 5.14487 17.7692 3.27295C20.2987 5.18263 21.9344 8.21339 21.9344 11.6257C21.9344 17.4036 17.245 22.0874 11.4672 22.0874C9.33883 22.0874 7.35818 21.4519 5.70522 20.3602Z"
                fill="#CF130A"
              />
            </svg>
          </template>
          <template v-if="selected != 'my'">
            <svg
              width="24"
              height="23"
              viewBox="0 0 24 23"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <ellipse
                cx="12"
                cy="9.05552"
                rx="3.66667"
                ry="3.66667"
                stroke="black"
                stroke-linecap="round"
              />
              <circle cx="12" cy="11.5" r="11" stroke="black" />
              <path
                d="M19.3333 19.6961C18.9008 18.3967 17.9476 17.2484 16.6217 16.4295C15.2958 15.6106 13.6713 15.1667 12 15.1667C10.3287 15.1667 8.70418 15.6106 7.37827 16.4295C6.05237 17.2484 5.09923 18.3967 4.66667 19.6961"
                stroke="black"
                stroke-linecap="round"
              />
            </svg>
          </template>
          <p class="tabText">我的</p>
        </div>
      </mt-tab-item>
    </mt-tabbar>
  </div>
</template>

<script>
import TabHome from "@/views/TabHome";
import TabOnsale from "@/views/TabOnsale";
import TabCart from "@/views/TabCart";
import TabMy from "@/views/TabMy";
import { getopenid,updateOpenId } from "@/api/user";

export default {
  data() {
    return {
      selected: "home",
    };
  },
  components: {
    TabHome,
    TabOnsale,
    TabCart,
    TabMy,
  },
  created() {
    let page = sessionStorage.getItem("page");
    if (["home", "onsale", "cart", "my"].indexOf(page) > -1) {
      this.selected = page;
    }
    if(this.$route.query && this.$route.query.rid){
      this.$router.push({
        path:"register",
        query:this.$route.query
      })
    }
  },
  mounted(){
      let openid =  localStorage.getItem("openid");
      if(!openid&&process.env.wxDomain!=''){
        this.getCode();
      }
  },
  methods: {
    onPage(value) {
      this.selected = value;
    },
    async getCode() {
      // //获取openid
      if (!this.$route.query || !this.$route.query.code) {
        window.location.href =
          "https://open.weixin.qq.com/connect/oauth2/authorize?appid="+process.env.appId+"&redirect_uri=https%3A%2F%2F"+process.env.wxDomain+"%2F&response_type=code&scope=snsapi_base&state=123#wechat_redirect";
      } else {
        let code = this.$route.query.code;
        //取到数据结果
        let {data} = await getopenid(code);
        localStorage.setItem("openid",data.openid)
        updateOpenId({openId:data.openid});
      }
    },
  },
  watch: {
    selected(nValue, oValue) {
      sessionStorage.setItem("page", nValue);
      switch (nValue) {
        case "home":
          this.$refs.home.showPage();
          break;
        case "onsale":
          this.$refs.onsale.showPage();
          break;
        case "cart":
          this.$refs.cart.showPage();
          break;
        case "my":
          this.$refs.my.showPage();
          break;
      }
    },
  },
};
</script>

<style scoped>
.page {
  height: 100%;
}

.content {
  height: calc(100vh - 55px);
  overflow-x: auto;
  overflow-y: auto;
}

.mint-tabbar {
  background-color: #fefefe;
  color: #222;
}

.mint-tabbar > .mint-tab-item.is-selected {
  background-color: #fefefe;
  color: #222;
}

.mint-tab-item {
  border: 1px 0 0 0 solid #d5b86866;
}

.home-btn {
  text-align: center;
}
.home-btn img {
  width: 28px;
  height: 28px;
  object-fit: fill;
}
.tabText {
  color: #000000;
  font-size: 12px;
}
</style>
